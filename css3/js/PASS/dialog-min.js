(function(){function h(n,d){var k=document.getElementsByTagName("head")[0]||document.documentElement,o=document.createElement("script");k.appendChild(o);o.src=n+"?"+(new Date).getTime();o.charset="utf-8";o.type="text/javascript";var a=function(){if(!this.readyState||this.readyState==="loaded"){d&&d(),o.onload=o.onreadystatechange=null,k.removeChild(o),o=null}};o.onload=b&&e>8?a:o.onreadystatechange=a}function l(c){var d=c,k=0;m.each(d,function(n,o){if(o==""||m.isEmptyObject(o)){d=n-k<0?d:d.slice(0,n-k).concat(d.slice(n-k+1,d.length)),k++}});return d}function j(I,B,C){function F(n,k){function p(a){m.isUndefined(E[a].requires)?K[o].push(a):(K[d].push(a),d++,m.each(E[a].requires,function(r,q){p(q,E[q])}))}var d=0;K=[[],[],[],[],[],[]];p(n,k)}function z(k){m.each(D[k],function(q,p){var n=E[p];m.isPlainObject(n)&&m.isUndefined(A[p])&&m.isUndefined(H[p])&&(H[p]=n,h(n.path,function(){m.isUndefined(A[p])&&(A[p]=n);m.isUndefined(H[p])||delete H[p]}))});var d=setInterval(function(){s(k)&&(clearInterval(d),x++,m.isUndefined(D[x])?(L&&C(),L=!1):z(x))},G)}function s(k){var d=1;m.each(D[k],function(n,a){m.isUndefined(A[a])&&(d=0)});return d}var E=I.Env._mods,A=I.Env._loadMods,H=I.Env._loadStack,o=5,K=[[],[],[],[],[],[]],c=[[],[],[],[],[],[]],J=[],L=!0,x=0,G=5;m.each(B,function(a){F(a,B[a]);a=l(K.reverse());J.push(a)});var D=function(){m.each(J,function(k,d){m.each(d,function(r,q){for(var p=c[r],n=0;n<q.length;n++){for(var v=!0,u=0;u<p.length;u++){q[n]==p[u]&&(v=!1)}v&&p.push(q[n])}c[r]=p})});return l(c)}();z(x)}function g(d,n){if(!n||!d){return d}for(var k in n){d[k]=n[k]}return d}var i=window,m;i.KM===void 0&&(i.KM={});m=i.KM;var i=navigator.userAgent.toLowerCase(),b=i.indexOf("msie")>-1&&i.indexOf("opera")==-1;i.indexOf("gecko")>-1&&i.indexOf("khtml");i.indexOf("applewebkit");i.indexOf("opera");var e=(i=/(?:msie|firefox|webkit|opera)[\/:\s](\d+)/.exec(i))?i[1]:"0";m.Env={_mods:{},_loadStack:{},_loadMods:{}};g(m,{mix:g,add:function(n,p){function q(d,u,k){d[u]=m.isFunction(k)?k(m):k}var s=n.split(".");if(s.length==1){q(m,n,p)}else{for(var c=0,o=s.length,r=m;c<o;c++){f=c>=o-1?p:{},r=m.isUndefined(r[s[c]])?r:r[s[c]],q(r,s[c],f),r=m[s[c]]}}},load:function(d,o){var p=this.Env._mods,n={},c=d.split(",");m.each(c,function(k,q){n[q]||(n[q]=p[q])});j(this,n,o)},map:function(d,k){this.Env._mods[d]||(this.Env._mods[d]=k)},each:function(c,k){if(m.isArray(c)){for(var n=0,o=c.length;n<o;n++){if(k.call(c[n],n,c[n])===!1){break}}}else{for(n in c){if(c.hasOwnProperty(n)&&k.call(c[n],n,c[n])===!1){break}}}},merge:function(){var d={},n,k=arguments.length;for(n=0;n<k;++n){g(d,arguments[n])}return d},augment:function(){var n=arguments,q=n.length-1,o=n[0],p=n[q],k=1;KM.isBoolean(p)||(p=void 0,q++);for(;k<q;k++){g(o.prototype,n[k].prototype||n[k],p)}return o},extend:function(n,q){if(!q||!n){return n}var p=Object.prototype,o=q.prototype,c=function(d){function k(){}k.prototype=d;return new k}(o);m.isPlainObject(q)&&(n=q,n=q.constructor!=p.constructor?q.constructor:function(){q.apply(this.arguments)});n.prototype=c;c.constructor=n;n.superclass=o;if(o.constructor===p.constructor){o.constructor=q}return n}})})();(function(a){var b=Object.prototype.toString;a.mix(a,{isUndefined:function(c){return c===void 0},isBoolean:function(c){return b.call(c)==="[object Boolean]"},isString:function(c){return b.call(c)==="[object String]"},isNumber:function(c){return b.call(c)==="[object Number]"&&isFinite(c)},isArray:function(c){return b.call(c)==="[object Array]"},isFunction:function(c){return b.call(c)==="[object Function]"},isPlainObject:function(c){return c&&b.call(c)==="[object Object]"&&!c.nodeType&&!c.setInterval},isEmptyObject:function(e){for(var c in e){return !1}return !0}})})(KM);KM.add("widget.Dialog",function(b){var a={struc:null,Temps:"",Data:"",close:".close",text:"alert \u5bee\u7470\u56ad\u5a34\ue1bc\u7730",drag:false,dragLoc:false,dragTags:"",dragBody:"",diagCursor:"move",time:"max",isFrame:true,opacity:0.5,backcolor:"#ccc",zIndex:9,fixed:true,ParIframe:false,ParIframeMan:window.top,isloc:false,functionAfterClose:null,callback:function(){}},e={display:"none",position:"absolute",backgroundColor:"#ccc",zIndex:9,top:"0px",left:"0px",height:"768px",width:"1024px",backgroundImage:"url(about:blank;)",opacity:0.5,filter:"alpha(opacity=50)",mozOpacity:0.5};function d(g,h){b.each(h,function(j,i){g[j]=i})}function c(n,B){var q=this;if(!(q instanceof c)){return new c(n,b.merge(a,B))}var B=q.config=B;var r=!((window.ActiveXObject&&!window.XMLHttpRequest)==undefined?true:false);var C=!B.ParIframe?document:B.ParIframeMan.document;var j=!B.ParIframe?window:B.ParIframeMan;var w=Date.parse(new Date())+Math.floor(Math.random()*100000);var A={ie:function(){return !!window.ActiveXObject},version:function(){if(!!window.ActiveXObject){var F=!!window.ActiveXObject;var I=F&&!window.XMLHttpRequest;var G=F&&!!document.documentMode;var H=F&&!I&&!G;if(F){if(I){return"6.0"}else{if(G){return"8.0"}else{if(H){return"7.0"}}}}}}};if(!A.ie()){var m=window.HTMLElement.prototype;m.__defineGetter__("outerHTML",function(){var I="<"+this.tagName;var G=this.attributes;for(var H=0,F=G.length;H<F;H++){if(G[H].specified){I+=" "+G[H].name+'="'+G[H].value+'"'}}if(!this.canHaveChildren){return I+" />"}return I+">"+this.innerHTML+"</"+this.tagName+">"});m.__defineSetter__("outerHTML",function(F){var G=this.ownerDocument.createRange();G.setStartBefore(this);var H=G.createContextualFragment(F);this.parentNode.replaceChild(H,this);return F});m.__defineGetter__("canHaveChildren",function(){return !/^(area|base|basefont|col|frame|hr|img|br|input|isindex|link|meta|param)$/.test(this.tagName.toLowerCase())})}var h=function(H,J){var F=J==undefined?C:J;this.i=H;switch(H.substr(0,1)){case"#":return I();break;case".":return G();break;default:return G();break}function I(){var K=this.i.split("#").length>1?this.i.split("#"):[null,this.i];return F.getElementById(K[1])}function G(){var K=this.i.split(".").length>1?this.i.split("."):[null,this.i];var O=[],N=F.getElementsByTagName(K[0]||"*");for(var M=0;M<N.length;M++){if(N[M].className.split(" ").length==1){N[M].className==K[1]&&O.push(N[M])}else{var P=N[M].className.split(" ");for(var L=0;L<P.length;L++){P[L]==K[1]&&O.push(N[M])}}}return O}};var l={addEvent:C.addEventListener?function(I,H,G,F){if(I.addEventListener){I.addEventListener(H,G,false)}}:function(H,G,F){if(H.attachEvent){H.attachEvent("on"+G,F)}},removeEvent:C.removeEventListener?function(I,H,G,F){if(I.removeEventListener){I.removeEventListener(H,G,false)}}:function(H,G,F){if(H.detachEvent){H.detachEvent("on"+G,F)}}};var v=function(H,G){if(H.length!=undefined){for(var F=0;F<H.length;F++){l.addEvent(H[F],"click",function(I){I=I||event;!A.ie()?I.preventDefault():I.returnValue=false;G()})}}else{l.addEvent(H,"click",function(I){I=I||event;!A.ie()?I.preventDefault():I.returnValue=false;G()})}};function z(J,H){var K=J.childNodes,F=[],I=H.substr(0,1);G(K);function G(P){for(var L=0;L<P.length;L++){var N=P[L];if(N.nodeType==1){if(I=="."){if(N.className.split(" ").length==1){N.className==H.split(".")[1]&&F.push(N)}else{var O=N.className.split(" ");for(var M=0;M<O.length;M++){O[M]==H.split(".")[1]&&F.push(N)}}}else{if(I=="#"){N.getAttribute("id")==H.split("#")[1]&&F.push(N)}else{N.tagName.toLowerCase()==H&&F.push(N)}}if(N.childNodes.length>=1){G(N.childNodes)}}}}return F}function o(J,H){var F=[],I=H==""&&H.substr(0,1);G(J);function G(N){var L=N.parentNode;if(L.nodeType==1){if(I=="."){if(L.className.split(" ").length==1){L.className==H.split(".")[1]&&F.push(L)}else{var M=L.className.split(" ");for(var K=0;K<M.length;K++){M[K]==H.split(".")[1]&&F.push(L)}}}else{if(I=="#"){L.getAttribute("id")==H.split("#")[1]&&F.push(L)}else{}}if(L.tagName!="BODY"){G(L)}}}return F}function D(G,H){var J=G.match(/\{[a-zA-Z]+\}/gi);for(var F=0;F<J.length;F++){var I=J[F].replace(/[\{\}]/gi,"");G=G.replace(J[F],H[I])}return G}function E(){var I=h("div.__layerbox_mask_dialog_pup");if(!I.length){this.el=C.body.appendChild(C.createElement("DIV"));var G={backgroundColor:B.backcolor,zIndex:B.zIndex,height:Math.max(C.documentElement.clientHeight,C.documentElement.scrollHeight)+"px",width:Math.max(C.documentElement.clientWidth,C.documentElement.scrollWidth)+"px",opacity:B.opacity,filter:"alpha(opacity="+(B.opacity*100)+")",mozOpacity:B.opacity};d(this.el.style,b.merge(e,G));var H=this.el.style;l.addEvent(j,"resize",function(){H.height=Math.max(C.documentElement.clientHeight,C.documentElement.scrollHeight)+"px";H.width=Math.max(C.documentElement.clientWidth,C.documentElement.scrollWidth)+"px"});this.el.className="__layerbox_mask_dialog_pup";if(A.version()==6){var F="width:100%;height:100%;display:block;filter:Alpha(opacity=0);";this.el.innerHTML='<iframe frameborder="no" style="'+F+'"></iframe><div style="position:absolute;z-index:2;left:0;top:0;'+F+'"></div>'}}else{this.el=I[0]}}E.prototype={show:function(F){this.el.style.display="block"},hide:function(){this.el.style.display="none"}};function g(){this.center=function(H){H.style.display="block";var G=H.offsetHeight,F=H.offsetWidth;H.style.display="none";var I=(A.version()!=6?(C.documentElement.clientHeight-G)/2:(C.documentElement.clientHeight-G)/2+C.documentElement.scrollTop);H.style.top=(I<0?0:I)+"px";H.style.left=(C.documentElement.clientWidth-F)/2+"px";H.style.position="fixed";H.style.zIndex=B.zIndex+1;l.addEvent(j,"resize",function(){H.style.top=(A.version()!=6?(C.documentElement.clientHeight-G)/2:(C.documentElement.clientHeight-G)/2+C.documentElement.scrollTop)+"px";H.style.left=(C.documentElement.clientWidth-F)/2+"px"});if(A.version()==6){H.style.position="absolute"}if(!B.fixed){H.style.position="absolute";C.documentElement.scrollTop=0}else{if(A.version()==6){l.addEvent(j,"scroll",function(){H.style.top=(C.documentElement.clientHeight-G)/2+C.documentElement.scrollTop+"px"})}}}}function p(G,K){var F=C.documentElement,H=C.body,J=Math.max;var I=C.compatMode=="CSS1Compat"?F:H;return{left:J(F.scrollLeft,H.scrollLeft),top:J(F.scrollTop,H.scrollTop),width:I[(G?"client":"scroll")+"Width"],height:G?I.clientHeight:J(I.clientHeight,I.scrollHeight)}}function y(L,G){var N=G,H=G||L,M,J,R,P,O;O=p(true);if(L.length!=undefined){for(var F=0;F<L.length;F++){L[F].onmousedown=I;L[F].style.cursor=B.diagCursor}}else{L.onmousedown=I;L.style.cursor=B.diagCursor}function I(S){S=S||j.event;M=S.clientX,J=S.clientY,R=H.offsetLeft,P=H.offsetTop;H.ondragstart=this.ondragstart=function(){return false};C.onmousemove=Q;if(L.setCapture){L.setCapture()}C.onlosecapture=j.onblur=C.onmouseup=K;if(S.preventDefault){S.preventDefault()}}function Q(U){U=U||j.event;var S=R+U.clientX-M,T=P+U.clientY-J;N.style.left=S+"px";N.style.top=T+"px"}function K(U){var aa,Y;var W=H.offsetLeft,V=H.offsetTop,X=H.offsetWidth,T=H.offsetHeight;var Z=O.left+O.width-X,S=O.top+O.height-T;if(V<0){t2=0;Y=true}if(W<0){t=0;aa=true}if(W>Z){t=Z;aa=true}if((V+O.top)>S){t2=S-O.top;Y=true}if(Y||aa){if(aa){H.style.left=(t)+"px"}if(Y){H.style.top=(t2)+"px"}}j.onblur=this.onmouseup=this.onmousemove=null;if(L.releaseCapture){L.releaseCapture()}}}function k(){this.al=C.body.appendChild(C.createElement("DIV"));this.al.className="layerbox_dialog_alert";var F={position:"absolute",width:"auto",height:"auto",zIndex:B.zIndex+1,display:"none",backgroundColor:"#FFF",fontSize:"12px",border:"2px solid #d8d8d8",textAlign:"center","float":"left"};d(this.al.style,F);this.al.innerHTML=""}k.prototype={show:function(F){this.al.style.display="block"},hide:function(){this.al.style.display="none"}};var x=function(){this.dialog=null;this._mk=null;this._close=null};x.mask=function(){var F=null;if(B.isFrame){F=new E()}this.mask_show=function(G){F&&F.show()};this.mask_hide=function(){F&&F.hide()}};var u=new x();x.alert=function(K,I){var J,H;if(!u.dialog){u.dialog=new k();u._mk=new x.mask();u.dialog.al.innerHTML='<p style="margin:20px 50px 5px 50px">'+(K||B.text)+'</p><button style="width:auto;height:auto;margin:10px 10px 10px 10px" class="close">\u934f\u62bd\u68f4</button>';J=new g();J.center(u.dialog.al);H=z(u.dialog.al,B.dragTags);B.drag&&y(H.length==0?u.dialog.al:H,u.dialog.al)}if(B.isloc){J=new g();J.center(u.dialog.al)}u._mk.mask_show();u.dialog.show();if(B.time!="max"||I!=undefined){var G=setTimeout(F,I||B.time)}u._close=function(){clearInterval(G);F()};v(z(u.dialog.al,B.close),u._close);function F(){u._mk.mask_hide();u.dialog.hide()}};x.struc=function(L,J){var K,I;if(!u.dialog||B.struc!=L){u._mk=new x.mask();if(!B.ParIframe){var H=h(L||B.struc);u.dialog=H.length!="undefined"?H:H[0]}else{var H=h(L||B.struc,document);u.dialog=C.body.appendChild(C.createElement("DIV"));u.dialog.innerHTML=(H.length!="undefined"?H:H[0]).outerHTML;var H=h(L||B.struc);u.dialog=H.length!="undefined"?H:H[0];B.callback()}B.struc=L;K=new g();K.center(u.dialog);I=z(u.dialog,B.dragTags);B.drag&&y(I.length==0?u.dialog:I,u.dialog)}if(B.isloc){K=new g();K.center(u.dialog)}u._mk.mask_show();u.dialog.style.display="block";if(B.time!="max"||J!=undefined){var G=setTimeout(F,J||B.time)}u._close=function(){clearInterval(G);F()};v(z(u.dialog,B.close),u._close);function F(){u._mk.mask_hide();u.dialog.style.display="none";if(B.functionAfterClose){B.functionAfterClose()}}};x.Temps=function(I,J){var K,H;if(!u.dialog){u.dialog=new k();u._mk=new x.mask();u.dialog.al.innerHTML=D(B.Temps,I||B.data);K=new g();K.center(u.dialog.al);B.callback();H=z(u.dialog.al,B.dragTags);B.drag&&y(H.length==0?u.dialog.al:H,u.dialog.al)}if(B.isloc){K=new g();K.center(u.dialog)}u._mk.mask_show();u.dialog.al.style.display="block";if(B.time!="max"||J!=undefined){var G=setTimeout(F,J||B.time)}u._close=function(){clearInterval(G);F()};v(z(u.dialog.al,B.close),u._close);function F(){u._mk.mask_hide();u.dialog.al.style.display="none"}};x.Drag=function(F,L){if(!u.dialog){var J=h(B.dragBody||L);u.dialog=J.length!="undefined"?J:J[0];if(A.version()==6){u.dialog.style.position="absolute"}else{u.dialog.style.position="fixed"}if(B.dragLoc){var I=u.dialog.style.display;var M=new g();M.center(u.dialog);u.dialog.style.display=I}}var K=z(u.dialog,B.dragTags);y(K.length==0?u.dialog:K,u.dialog);if(B.time!="max"){var H=setTimeout(G,B.time)}u._close=function(){clearInterval(H);G()};v(z(u.dialog,B.close),u._close);function G(){u.dialog.style.display="none"}};x.position=function(){};x.close=function(H,F){if(KM.isString(H)){var G=h(H);G.style.display="none";!!F&&u._close()}else{u._close()}};function i(F){_mask.show()}function s(){_mask.hide()}this._main=function(H,G,F){!n&&[n="alert"];n=n.toLowerCase();switch(n){case"alert":x.alert(H,G);break;case"struc":x.struc(H,G);break;case"temps":x.Temps(H,G);break;case"drag":x.Drag(H,G);B.drag=true;break;default:x.alert(H);break}};this._close=function(G,F){x.close(G,F)};(function(){switch(n){case"drag":x.Drag();break;default:break}})()}b.augment(c,{close:function(){},alert:function(i,h,g){this._main(i,h,g)},hide:function(){this.hide()},show:function(h,g){},close:function(h,g){this._close(h,g)}});return c});
